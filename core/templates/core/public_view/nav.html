{% load static %}
<!-- Navbar -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50" 
    x-data="{ 
        mobileMenuOpen: false,
        slideOverOpenReabonnement: false,
    }">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    {% block navbar_logo %}
                    <div class="flex items-center">
                        <!-- Logo personnalisable - Remplacez cette section par votre propre logo -->
                        {% block custom_logo %}
                        <!--
                        Pour utiliser une image comme logo, décommentez et modifiez cette section :
                        <img src="{% static 'images/votre-logo.png' %}" alt="Logo" class="w-8 h-8 mr-3">
                        -->
                        <!-- Logo par défaut (lettre stylisée) -->
                        <!-- <div class="w-8 h-8  rounded-md flex items-center justify-center mr-3">
                        </div> -->
                        {% endblock %}
                        <a href="{% url 'core:list_entreprise_public' %}" class="font-bold text-xl text-slate-900 font-poppins">
                            {% block site_name %}Projet EMMA{% endblock %}
                        </a>
                    </div>
                    {% endblock %}
                </div>

                <!-- Desktop Navigation -->
                
                
                <!-- User Menu / Actions -->
                <div class=" md:flex items-center space-x-4">
                    {% block navbar_actions %}
                    {% if user.is_authenticated %}
                    <span class="text-gray-700 px-3 py-2 text-sm font-medium">Bonjour, {{ user.username }}</span>
                 
                    <div  class="inline">
                        {% csrf_token %}
                        <a href="{% url 'core:entreprise_list' %}" class="px-3 py-2 text-sm font-medium transition-colors border rounded-lg">
                            Dashboard
                        </a>
                    </div>
                  
                    {% endif %}
                    {% endblock %}
                </div>

               
            </div>
        </div>

        <!-- Mobile menu -->
        <div
            class="md:hidden"
            x-show="mobileMenuOpen"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform -translate-y-2"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 transform translate-y-0"
            x-transition:leave-end="opacity-0 transform -translate-y-2"
            style="display: none;"
        >
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t border-gray-200">
                {% block navbar_mobile_menu %}
                <a href="#" class="text-gray-900 block px-3 py-2 text-base font-medium">Gestion Budget</a>
                {% endblock %}
            </div>
            <div class="pt-4 pb-3 border-t border-gray-200 bg-gray-50">
                <div class="px-2 space-y-1 sm:px-3">
                    {% block navbar_mobile_actions %}
                    {% if user.is_authenticated %}
                    <div class="px-3 py-2 text-sm font-medium text-gray-700">Bonjour, {{ user.username }}</div>
                    
                    <form method="post" action="#" class="w-full">
                        {% csrf_token %}
                        <button type="submit" class="text-red-600 hover:text-red-700 block px-3 py-2 text-base font-medium w-full text-left">
                            Déconnexion
                        </button>
                    </form>
                    {% else %}
                    <button class="text-gray-700 hover:text-primary block px-3 py-2 text-base font-medium w-full text-left">
                        Connexion
                    </button>
                    <button class="bg-blue-600 hover:bg-primary text-white block px-3 py-2 text-base font-medium w-full text-left rounded-md">
                        Inscription
                    </button>
                    {% endif %}
                    {% endblock %}
                </div>
            </div>
        </div>

        <!-- reabonnement sidebar -->
        <div>
            <template x-teleport="body">
                <div 
                    x-show="slideOverOpenReabonnement"
                    @keydown.window.escape="slideOverOpenReabonnement=false"
                    class="relative z-[99]">
                    <div x-show="slideOverOpenReabonnement" x-transition.opacity.duration.600ms @click="slideOverOpenReabonnement = false" class="fixed inset-0 bg-black/10"></div>
                    <div class="overflow-hidden fixed inset-0">
                        <div class="overflow-hidden absolute inset-0">
                            <!-- Remove the pt-11 from the element below, this was needed only for the demo -->
                            <div class="flex fixed inset-y-0 right-0 pt-0 pl-10 max-w-full">
                                <div 
                                    x-show="slideOverOpenReabonnement" 
                                    @click.away="slideOverOpenReabonnement = false"
                                    x-transition:enter="transform transition ease-in-out duration-500 sm:duration-700" 
                                    x-transition:enter-start="translate-x-full" 
                                    x-transition:enter-end="translate-x-0" 
                                    x-transition:leave="transform transition ease-in-out duration-500 sm:duration-700" 
                                    x-transition:leave-start="translate-x-0" 
                                    x-transition:leave-end="translate-x-full" 
                                    class="w-screen max-w-md">
                                    <div class="flex overflow-y-scroll flex-col py-5 h-full bg-white border-l shadow-lg border-neutral-100/70">
                                        <div class="px-4 sm:px-5">
                                            <div class="flex justify-between items-start pb-1">
                                                <h2 class="text-base font-semibold leading-6 text-gray-900" id="slide-over-title">Ajouter une entreprise</h2>
                                                <div class="flex items-center ml-3 h-auto"> 
                                                    <button @click="slideOverOpenReabonnement=false" class="flex absolute right-0 z-30 justify-center items-center px-3 py-2 mt-6 mr-5 space-x-1 text-xs font-medium uppercase rounded-md border border-neutral-200 text-neutral-600 hover:bg-neutral-100">
                                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>
                                                        <span>Close</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div 
                                        x-data="{
                                            plan:{},
                                            selectedMois: 1,
                                            devise_indice : 'XAF',
                                            devise_symbol: '',
                                            
                                            contry_operateur : {},
                                            selectContry: '',
                                            contry:{},
                                            hx_indicator : false,
                                            
                                            
                                            get get_hx_indicator(){
                                                return this.hx_indicator;
                                            },
                                            
                                            get contryCode(){
                                                return this.contry_operateur.find(contry => contry.country === this.selectContry).code;
                                            },
                                            get operateurList(){
                                                return this.contry_operateur.find(contry => contry.country === this.selectContry).providers;
                                            },

                                            get sommeToPay(){
                                                if(this.plan.price && this.selectedMois){
                                                    return this.plan.price * this.selectedMois;
                                                }
                                                return 0;
                                            }
                                        }"

                                        >

                                            <div id="ReabonnementCard">
                                                <div class="px-4 py-5 flex flex-col gap-2">
                                                    <div class="grid grid-cols-2 gap-3 ">
                                                        <div class="h-6 bg-gray-100 animate-pulse rounded-md"></div>
                                                        <div class="h-6 bg-gray-100 animate-pulse rounded-md"></div>
                                                    </div>

                                                    <div class="flex flex-col gap-2">
                                                        <div class="h-10 bg-gray-100 animate-pulse rounded-md"></div>

                                                        <div class="flex justify-between">
                                                            <div class="h-2 w-24 bg-gray-100 animate-pulse rounded-md" ></div>
                                                            <div class="h-2 w-34 bg-gray-100 animate-pulse rounded-md"></div>
                                                        </div>
                                                    </div>

                                                    <div class="border rounded-md border-gray-100 py-2 px-3">
                                                        <div class="h-96 bg-gray-100 animate-pulse rounded-md px-3 py-2 flex flex-col gap-3">
                                                            <div class="h-4 w-52 bg-gray-200 animate-pulse rounded-md mb-4"></div>

                                                            <div>
                                                                <div class="h-4 w-36 bg-gray-200 animate-pulse rounded-md mb-2"></div>

                                                                <div class="h-11 bg-gray-200 animate-pulse rounded-md"></div>
                                                            </div>

                                                            <div>
                                                                <div class="h-4 w-36 bg-gray-200 animate-pulse rounded-md mb-2"></div>

                                                                <div class="grid grid-cols-4 gap-2">
                                                                    <div class="col-span-1 h-11 bg-gray-200 animate-pulse rounded-md"></div>
                                                                    <div class="col-span-2 h-11 bg-gray-200 animate-pulse rounded-md"></div>
                                                                    <div class="col-span-1 h-11 bg-gray-200 animate-pulse rounded-md"></div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="h-6 w-28 bg-gray-100 animate-pulse rounded-md"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>


    </nav>